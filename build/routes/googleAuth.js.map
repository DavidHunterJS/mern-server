{"version":3,"file":"googleAuth.js","names":["_express","require","_passport","_interopRequireDefault","obj","__esModule","default","router","Router","get","passport","authenticate","scope","clientUrl","process","env","NODE_ENV","CLIENT_URL_PROD","CLIENT_URL_DEV","failureRedirect","session","req","res","token","user","generateJWT","cookie","redirect","_default","exports"],"sources":["../../src/routes/googleAuth.js"],"sourcesContent":["import { Router } from 'express';\nimport passport from 'passport';\n\nconst router = Router();\n\nrouter.get(\n  '/google',\n  passport.authenticate('google', {\n    scope: ['profile', 'email'],\n  }),\n);\n\nconst clientUrl = process.env.NODE_ENV === 'production' ? process.env.CLIENT_URL_PROD : process.env.CLIENT_URL_DEV;\n\nrouter.get(\n  '/google/callback',\n  passport.authenticate('google', {\n    failureRedirect: '/',\n    session: false,\n  }),\n  (req, res) => {\n    const token = req.user.generateJWT();\n    res.cookie('x-auth-cookie', token);\n    res.redirect(clientUrl);\n  },\n);\n\nexport default router;\n"],"mappings":";;;;;;AAAA,IAAAA,QAAA,GAAAC,OAAA;AACA,IAAAC,SAAA,GAAAC,sBAAA,CAAAF,OAAA;AAAgC,SAAAE,uBAAAC,GAAA,WAAAA,GAAA,IAAAA,GAAA,CAAAC,UAAA,GAAAD,GAAA,KAAAE,OAAA,EAAAF,GAAA;AAEhC,MAAMG,MAAM,GAAG,IAAAC,eAAM,EAAC,CAAC;AAEvBD,MAAM,CAACE,GAAG,CACR,SAAS,EACTC,iBAAQ,CAACC,YAAY,CAAC,QAAQ,EAAE;EAC9BC,KAAK,EAAE,CAAC,SAAS,EAAE,OAAO;AAC5B,CAAC,CACH,CAAC;AAED,MAAMC,SAAS,GAAGC,OAAO,CAACC,GAAG,CAACC,QAAQ,KAAK,YAAY,GAAGF,OAAO,CAACC,GAAG,CAACE,eAAe,GAAGH,OAAO,CAACC,GAAG,CAACG,cAAc;AAElHX,MAAM,CAACE,GAAG,CACR,kBAAkB,EAClBC,iBAAQ,CAACC,YAAY,CAAC,QAAQ,EAAE;EAC9BQ,eAAe,EAAE,GAAG;EACpBC,OAAO,EAAE;AACX,CAAC,CAAC,EACF,CAACC,GAAG,EAAEC,GAAG,KAAK;EACZ,MAAMC,KAAK,GAAGF,GAAG,CAACG,IAAI,CAACC,WAAW,CAAC,CAAC;EACpCH,GAAG,CAACI,MAAM,CAAC,eAAe,EAAEH,KAAK,CAAC;EAClCD,GAAG,CAACK,QAAQ,CAACd,SAAS,CAAC;AACzB,CACF,CAAC;AAAC,IAAAe,QAAA,GAAAC,OAAA,CAAAvB,OAAA,GAEaC,MAAM","ignoreList":[]}